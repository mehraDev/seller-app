"use strict";(self.webpackChunkdigibhoomi_seller=self.webpackChunkdigibhoomi_seller||[]).push([[746],{4746:function(n,e,r){r.r(e),r.d(e,{default:function(){return on}});var t,a,i,o,c,s,l,u=r(9439),d=r(2791),p=r(3433),f=r(4165),h=r(5861),x=r(168),m=r(6444),g=r(4759),v=r(184),b=m.ZP.div(t||(t=(0,x.Z)(["\n  padding: 10px;\n  margin: 10px 0;\n  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);\n  width: 100%; /* Set the desired width */\n  height: 800px; /* Set the desired height */\n  display: grid;\n  grid-template-columns: repeat(auto-fill, minmax(10rem, 1fr));\n  grid-auto-rows: 10rem;\n  grid-gap: 20px;\n\n  @media (max-width: 768px) {\n    grid-template-columns: repeat(auto-fill, minmax(8rem, 1fr));\n    grid-auto-rows: 8rem;\n  }\n"]))),Z=(m.ZP.div(a||(a=(0,x.Z)(["\n  /* Styles for each image item */\n"]))),m.ZP.div(i||(i=(0,x.Z)(["\n  display: flex;\n  align-items: center;\n  padding: 0.5rem;\n  cursor: pointer;\n  font-size: 1rem;\n\n    margin-top: 10px;\n    font-weight: bold;\n  &:hover {\n    background-color: rgb(71 255 125 / 66%);\n  }\n\n  .icon {\n    margin-right: 0.5rem;\n    color: #666;\n  }\n  background-color: rgb(86 255 135 / 30%);\n  padding: 10px;\n  border-radius: 5px;\n  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  cursor: pointer;\n"])))),j=m.ZP.div(o||(o=(0,x.Z)(["\n  position: relative;\n  width: 100%;\n  height: 200px; /* Adjust the height as needed */\n  display: flex;\n  justify-content: center;\n  align-items: center;\n"]))),k=(0,m.F4)(c||(c=(0,x.Z)(["\n  0% {\n    transform: scale(0);\n    opacity: 0;\n  }\n  30% {\n    transform: scale(1.2);\n    opacity: 1;\n  }\n  70% {\n    transform: scale(0.8);\n    opacity: 1;\n  }\n  100% {\n    transform: scale(1);\n    opacity: 0;\n  }\n"]))),w=m.ZP.div(s||(s=(0,x.Z)(["\n  position: relative;\n  width: 30px;\n  height: 30px;\n  border-radius: 50%;\n  background-color: ",';\n\n  &::before,\n  &::after {\n    content: "";\n    position: absolute;\n    width: 30px;\n    height: 30px;\n    border-radius: 50%;\n    background-color: ',";\n    animation: "," 1.2s infinite;\n  }\n\n  &::before {\n    top: -60px;\n    left: 0;\n  }\n\n  &::after {\n    top: 60px;\n    left: 0;\n  }\n"])),(function(n){return n.theme.brandColor.primary}),(function(n){return n.theme.brandColor.primary}),k),C=function(n){var e=n.foldersList,r=n.onFolderClick,t=n.isLoading,a=n.images;n.onFileClick;return(0,v.jsx)(b,{children:t?(0,v.jsx)(j,{children:(0,v.jsx)(w,{})}):(0,v.jsxs)(v.Fragment,{children:[e.map((function(n,e){return(0,v.jsx)(Z,{onClick:function(){return r(n)},children:n},e)})),a.map((function(n,e){return(0,v.jsx)(g.Ei,{src:n.imageUrl,alt:n.name})}))]})})},y=r(445),S=r(276),P=r(4768),F=function(n){var e=n.location,r=n.path,t=n.isActive,a=n.onClick,i=(0,m.Fg)();return(0,v.jsxs)(g.xu,{onClick:a,children:[0!==e&&(0,v.jsx)(g.xv,{s:"12",w:6,m:[.25],c:i.neutralColor.textSecondary,children:"/"}),(0,v.jsx)(g.xv,{hc:i.brandColor.primaryTextHover,s:"12",w:5,m:[.25],c:t?i.brandColor.primaryTextActive:i.neutralColor.textSecondary,children:r})]})},U=(0,m.ZP)(g.xu)(l||(l=(0,x.Z)(["\n  width: initial;\n  cursor: pointer;\n"]))),E=function(n){var e=n.paths,r=n.activePath,t=n.onClick,a=function(n){t(n)};return(0,v.jsx)(U,{m:"0 0.5rem",children:e.map((function(n,e){return(0,v.jsx)(F,{location:e,path:n,isActive:n===r,onClick:function(){return a(e)}},e)}))})},X=r(7762),A=r(5463);function I(){return(I=(0,h.Z)((0,f.Z)().mark((function n(e){var r,t,a,i,o,c;return(0,f.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:n.prev=0,r=[],t=(0,X.Z)(e),n.prev=3,t.s();case 5:if((a=t.n()).done){n.next=13;break}return i=a.value,n.next=9,(0,A.fJ)("sellers",i);case 9:(o=n.sent)&&o.usr&&(c=o.usr,r.push(c));case 11:n.next=5;break;case 13:n.next=18;break;case 15:n.prev=15,n.t0=n.catch(3),t.e(n.t0);case 18:return n.prev=18,t.f(),n.finish(18);case 21:return n.abrupt("return",r);case 24:throw n.prev=24,n.t1=n.catch(0),console.error("Error fetching user names:",n.t1),new Error("Failed to fetch user names");case 28:case"end":return n.stop()}}),n,null,[[0,24],[3,15,18,21]])})))).apply(this,arguments)}var z=function(n){return I.apply(this,arguments)},H=r(5610),J=function(n){var e=n.path,r=n.onUpload,t=n.updatePath,a=(0,d.useState)(!0),i=(0,u.Z)(a,2),o=i[0],c=i[1],s=(0,d.useState)([]),l=(0,u.Z)(s,2),x=l[0],m=l[1],b=(0,d.useState)([]),Z=(0,u.Z)(b,2),j=Z[0],k=Z[1],w=(0,d.useState)(!1),F=(0,u.Z)(w,2),U=F[0],X=F[1],A=(0,d.useState)({}),I=(0,u.Z)(A,2),J=I[0],L=I[1],D=e[e.length-1],N=e.join("/");(0,d.useEffect)((function(){var n=function(){var n=(0,h.Z)((0,f.Z)().mark((function n(){var e,r,t,a,i,o,s,l;return(0,f.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,c(!0),X(!1),e=(0,S.iH)(P.tO,N),n.next=6,(0,S.aF)(e);case 6:if(r=n.sent,t=r.prefixes,a=t.map((function(n){return n.name})),"usr"!==D){n.next=19;break}return n.next=12,z(a);case 12:i=n.sent,o={},a.forEach((function(n,e){o[i[e]]=n})),m(i),L(o),n.next=20;break;case 19:m(a);case 20:return s=r.items,n.next=23,Promise.all(s.map(function(){var n=(0,h.Z)((0,f.Z)().mark((function n(e){var r;return(0,f.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,S.Jt)(e);case 2:return r=n.sent,n.abrupt("return",{name:e.name,imageUrl:r});case 4:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()));case 23:l=n.sent,k(l),c(!1),n.next=32;break;case 28:n.prev=28,n.t0=n.catch(0),c(!1),X(!0);case 32:case"end":return n.stop()}}),n,null,[[0,28]])})));return function(){return n.apply(this,arguments)}}();n()}),[D,N]);var Y=3===e.length&&"s"===e[0]&&"p"===e[2];return(0,v.jsxs)(g.JX,{children:[(0,v.jsxs)(g.X2,{p:"0.5rem 1rem",a:"center",j:"between",children:[(0,v.jsxs)(g.xu,{w:"initial",children:[(0,v.jsx)(y.ZP,{name:y.uH.GoBack,onClick:function(){if(1!==e.length){var n=e.slice(0,-1);t(n)}}}),(0,v.jsx)(E,{paths:e,activePath:e[e.length-1],onClick:function(n){var r=e.slice(0,n+1);t(r)}})]}),Y&&(0,v.jsx)(g.xu,{w:"initial",children:(0,v.jsx)(H.Z,{onClick:function(){return r()},children:"Add File"})})]}),(0,v.jsx)(g.X2,{children:(0,v.jsx)(C,{foldersList:x,onFolderClick:function(n){return function(n){if("usr"===D){var r=J[n];t([].concat((0,p.Z)(e),[r]))}else t([].concat((0,p.Z)(e),[n]))}(n)},isLoading:o,images:j,hasError:U,onFileClick:function(n){return r=n,void t([].concat((0,p.Z)(e),[r]));var r}})})]})};var L,D,N,Y,_,R,M=function(n){var e=n.lastIndexOf(".");return-1!==e&&e<n.length-1?n.substring(e+1):""},O=r(9215),T=r(9077),B=m.ZP.div(L||(L=(0,x.Z)(["\n  /* Styles for the file name */\n"]))),G=m.ZP.button(D||(D=(0,x.Z)(["\n  /* Styles for the save button */\n"]))),q=m.ZP.div(N||(N=(0,x.Z)(["\n  /* Styles for the popup buttons */\n  display: flex;\n  gap: 1rem;\n"]))),K=m.ZP.button(Y||(Y=(0,x.Z)(["\n  /* Styles for the popup button */\n  padding: 0.5rem 1rem;\n  background-color: #f44336;\n  color: white;\n  border: none;\n  border-radius: 4px;\n  cursor: pointer;\n"]))),Q=function(n){var e=n.file,r=n.filename,t=n.onNameUpdate,a=n.onDelete,i=n.isEditing,o=(0,m.Fg)(),c=(0,d.useState)(i),s=(0,u.Z)(c,2),l=s[0],p=s[1],f=(0,d.useState)(!1),h=(0,u.Z)(f,2),x=h[0],b=h[1],Z=URL.createObjectURL(e);return(0,v.jsxs)(g.JX,{style:{boxShadow:o.shadow.boxShadow,background:"white"},p:"0.5rem",children:[(0,v.jsx)(g.X2,{j:"end",w:"initial",style:{alignSelf:"flex-end",background:"white",right:"0",borderRadius:"4px",gap:"0.5rem",boxShadow:o.shadow.boxShadowSecondary},children:!l&&(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(y.ZP,{name:y.uH.Edit,onClick:function(){p(!0)},color:o.brandColor.primary}),(0,v.jsx)(y.ZP,{name:y.uH.Delete,onClick:function(){b(!0)},color:o.brandColor.red})]})}),(0,v.jsx)(g.Ei,{src:Z,h:"150px"}),l?(0,v.jsx)(T.oH,{value:r,onChange:function(n){return t(n)}}):(0,v.jsx)(B,{children:r}),l&&(0,v.jsx)(G,{onClick:function(){p(!1)},children:"Save"}),x&&(0,v.jsx)(O.Y,{children:(0,v.jsxs)(g.JX,{w:"initial",a:"center",j:"center",p:"1rem",style:{background:o.neutralColor.bgContainer,borderRadius:"6px"},children:[(0,v.jsx)(g.xv,{c:o.brandColor.red,children:"Delete ".concat(r,"?")}),(0,v.jsxs)(q,{children:[(0,v.jsx)(K,{onClick:function(){b(!1),a()},children:"Yes"}),(0,v.jsx)(K,{onClick:function(){b(!1)},children:"No"})]})]})})]})},V=r(1295),W=function(){var n=(0,h.Z)((0,f.Z)().mark((function n(e,r,t,a){var i,o,c,s,l;return(0,f.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(i=["food","cloth","other"],o="s/".concat(a,"/p"),i.includes(a)){n.next=4;break}throw new Error("Invalid pool name: ".concat(a));case 4:return c=o,s="imagedb/sellers/"+a,l=$(r),n.next=9,(0,V.z)(e,c,s,l,t);case 9:case"end":return n.stop()}}),n)})));return function(e,r,t,a){return n.apply(this,arguments)}}(),$=function(n){var e=function(n){return(n=(n=(n=n.toLowerCase()).replace(/ /g,"_")).replace(/[^a-zA-Z0-9-_\.]/g,"")).replace(/[-_]{2,}/g,"_")}(n),r=function(){var n="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";return Array.from({length:8},(function(){var e=Math.floor(Math.random()*n.length);return n.charAt(e)})).join("")}();return"".concat(e,"-").concat(r)},nn=function(){var n=(0,h.Z)((0,f.Z)().mark((function n(e,r){var t,a,i,o,c,s;return(0,f.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:n.prev=0,t=(0,X.Z)(e),n.prev=2,t.s();case 4:if((a=t.n()).done){n.next=11;break}return i=a.value,o=i.image,c=i.imageName,s=i.meta,n.next=9,W(o,c,s,r);case 9:n.next=4;break;case 11:n.next=16;break;case 13:n.prev=13,n.t0=n.catch(2),t.e(n.t0);case 16:return n.prev=16,t.f(),n.finish(16);case 19:n.next=25;break;case 21:throw n.prev=21,n.t1=n.catch(0),console.log("Error Uploading Images: ",n.t1),new Error("Images Upload Failed");case 25:case"end":return n.stop()}}),n,null,[[0,21],[2,13,16,19]])})));return function(e,r){return n.apply(this,arguments)}}(),en=r(265),rn=(0,m.ZP)(g.X2)(_||(_=(0,x.Z)(["\n  align-items: center;\n  justify-content: space-between;\n   border-bottom: 1px solid ",";\n   padding: 1rem;\n   margin-bottom: 0.5rem;\n   font-size: large;\n   font-weight: 700;\n   color: ",";\n  ","\n  div{\n    margin-right: 1rem;\n  }\n  h3 {\n    flex-grow: 1;\n    text-align: center;\n    margin-right: 2rem;\n  }\n"])),(function(n){return n.theme.neutralColor.border}),(function(n){return n.theme.brandColor.primaryActive}),(function(n){var e=n.color;return e&&(0,m.iv)(R||(R=(0,x.Z)(["\n      color: ",";\n    "])),e)})),tn=r(2219),an=function(n){n.onUpload;var e=n.onClose,r=n.path,t=(0,d.useState)([]),a=(0,u.Z)(t,2),i=a[0],o=a[1],c=(0,d.useState)(!1),s=(0,u.Z)(c,2),l=s[0],x=s[1],m=(0,d.useState)(""),b=(0,u.Z)(m,2)[1],Z=(0,d.useState)([]),j=(0,u.Z)(Z,2),k=j[0],w=j[1],C=function(){var n=(0,h.Z)((0,f.Z)().mark((function n(){var e,t,a,c;return(0,f.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!k.some((function(n){return""===n.trim()}))){n.next=3;break}return alert("Image name cannot be empty."),n.abrupt("return");case 3:if(x(!0),n.prev=4,e=k.map((function(n,e){var r=M(i[e].name);return"".concat(n,".").concat(r)})),!r.includes("/p")){n.next=12;break}return t=r.split("/")[1],a=Date.now(),c=i.map((function(n,r){return{image:n,name:k[r],imageName:e[r],meta:{timestamp:a,oname:k[r]}}})),n.next=12,nn(c,t);case 12:b("Success"),n.next=18;break;case 15:n.prev=15,n.t0=n.catch(4),b("Images Upload Failed");case 18:return n.prev=18,x(!1),o([]),w([]),n.finish(18);case 23:case"end":return n.stop()}}),n,null,[[4,15,18,23]])})));return function(){return n.apply(this,arguments)}}(),S=l;return console.log(!i.length,"!selectedImages.length"),(0,v.jsxs)(g.JX,{style:{background:en.Z.neutralColor.bgContainer},h:"100%",w:"100%",children:[(0,v.jsxs)(rn,{children:[(0,v.jsx)(g.xv,{children:"Image Uploader"}),(0,v.jsx)(y.ZP,{name:y.uH.Close,onClick:e})]}),(0,v.jsxs)(g.X2,{p:"0.5rem 1rem",style:{gap:"1rem"},a:"center",j:"end",children:[(0,v.jsx)(H.Z,{size:"small",onClick:function(){},children:"Download Zip"}),(0,v.jsx)(H.Z,{size:"small",onClick:C,disabled:S||!i.length||k.some((function(n){return""===n})),children:"Save to Pool"})]}),(0,v.jsx)(g.X2,{p:"0.5rem 1rem",j:"between",children:(0,v.jsxs)(g.xv,{children:["Total Images: ",i.length]})}),i.length>0&&(0,v.jsx)(g.rj,{columns:4,mc:[.5],style:{backgroundColor:"#f8f8f8"},children:i.map((function(n,e){return(0,v.jsx)(Q,{file:n,filename:k[e],onNameUpdate:function(n){return function(n,e){w((function(r){var t=(0,p.Z)(r);return t[e]=n,t}))}(n,e)},onDelete:function(){return function(n){o((function(e){var r=(0,p.Z)(e);return r.splice(n,1),r})),w((function(e){var r=(0,p.Z)(e);return r.splice(n,1),r}))}(e)},isEditing:""===k[e].trim()},e)}))}),l&&(0,v.jsx)(O.Y,{children:(0,v.jsx)(tn.p,{})})]})},on=function(){var n=(0,d.useState)(["s"]),e=(0,u.Z)(n,2),r=e[0],t=e[1],a=(0,d.useState)(!1),i=(0,u.Z)(a,2),o=i[0],c=i[1];return(0,v.jsxs)(g.xu,{style:{position:"relative"},children:[(0,v.jsx)(J,{path:r,onUpload:function(){return c(!0)},updatePath:function(n){return t(n)}}),o&&(0,v.jsx)(O.Y,{children:(0,v.jsx)(an,{path:r.join("/"),onUpload:function(n){return console.log(n)},onClose:function(){return c(!1)}})})]})}},9215:function(n,e,r){r.d(e,{Y:function(){return l}});var t,a=r(168),i=r(6444),o=r(4759),c=r(184),s=(0,i.ZP)(o.xu)(t||(t=(0,a.Z)(["\n  width: 100%;\n  position: fixed;\n  height: 100%;\n  top: 0;\n  left:0;\n  z-index: 9;\n"]))),l=function(n){n.onClose;var e=n.children,r=(0,i.Fg)();return(0,c.jsx)(s,{style:{background:r.neutralColor.bgMask},children:(0,c.jsx)(o.JX,{h:"100%",j:"center",a:"center",style:{position:"relative"},children:e})})}}}]);
//# sourceMappingURL=746.2389a3f3.chunk.js.map