"use strict";(self.webpackChunkdigibhoomi_seller=self.webpackChunkdigibhoomi_seller||[]).push([[769],{5769:function(e,n,t){t.r(n),t.d(n,{default:function(){return d}});var r=t(2791),a=t(4165),i=t(5861),s=t(9439),o=t(276),u=t(4768),c=t(184),l=function(e){var n=e.onSubmit,t=(0,r.useState)(""),l=(0,s.Z)(t,2),f=l[0],d=l[1],m=(0,r.useState)(null),p=(0,s.Z)(m,2),g=p[0],h=p[1],x=(0,r.useState)(!1),v=(0,s.Z)(x,2),j=v[0],b=v[1],Z=function(){var e=(0,i.Z)((0,a.Z)().mark((function e(t){var r,i,s,c,l;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),g&&f){e.next=3;break}return e.abrupt("return");case 3:return b(!0),console.log("Creating storage ref..."),r=(0,o.iH)(u.tO),console.log("storageRef:",r),i=Date.now().toString(),s=(0,o.iH)(r,"s/food/p/".concat(f,"-").concat(i)),console.log("Uploading image..."),e.next=12,(0,o.KV)(s,g);case 12:return c=e.sent,console.log("Image uploaded:",c),e.next=16,(0,o.Jt)(c.ref);case 16:l=e.sent,console.log("Download URL:",l),n("".concat(f,"-").concat(i),l),b(!1);case 20:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return(0,c.jsxs)("form",{onSubmit:Z,children:[(0,c.jsxs)("div",{children:[(0,c.jsx)("label",{htmlFor:"image-name",children:"Image Name"}),(0,c.jsx)("input",{type:"text",id:"image-name",value:f,onChange:function(e){d(e.target.value)}})]}),(0,c.jsxs)("div",{children:[(0,c.jsx)("label",{htmlFor:"image-file",children:"Image File"}),(0,c.jsx)("input",{type:"file",id:"image-file",onChange:function(e){e.target.files&&e.target.files[0]&&h(e.target.files[0])}})]}),(0,c.jsx)("button",{type:"submit",disabled:j,children:j?"Uploading...":"Upload"})]})},f=function(){var e=(0,r.useState)([]),n=(0,s.Z)(e,2),t=n[0],l=n[1];return(0,r.useEffect)((function(){var e=function(){var e=(0,i.Z)((0,a.Z)().mark((function e(){var n,t,r,s;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=(0,o.iH)(u.tO,"s/food/p"),e.next=3,(0,o.aF)(n);case 3:return t=e.sent,r=t.items.map(function(){var e=(0,i.Z)((0,a.Z)().mark((function e(n){var t,r;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.name,e.next=3,(0,o.Jt)(n);case 3:return r=e.sent,e.abrupt("return",{name:t,url:r});case 5:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()),e.next=7,Promise.all(r);case 7:s=e.sent,l(s);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[]),(0,c.jsxs)("div",{children:[(0,c.jsx)("h2",{children:"Image Collection Viewer"}),(0,c.jsx)("div",{children:t.map((function(e){return(0,c.jsxs)("div",{children:[(0,c.jsx)("img",{src:e.url,alt:e.name}),(0,c.jsx)("div",{children:e.name})]},e.name)}))})]})},d=function(){return(0,c.jsxs)("div",{children:[(0,c.jsx)(l,{onSubmit:function(e,n){return console.log(e,n)}}),(0,c.jsx)(f,{})]})}}}]);
//# sourceMappingURL=769.74ce10ee.chunk.js.map